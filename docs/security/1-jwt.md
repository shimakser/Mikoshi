# JWT

Как правило, используется для передачи данных для аутентификации в клиент-серверных приложениях. Токены создаются сервером, подписываются секретным ключом и передаются клиенту, который в дальнейшем использует данный токен для подтверждения своей личности.

### Заголовок
- закодирована в Base64.
- typ - это тип токена JWT. Alg - алгоритм шифрования

### Payload
- закодирована в Base64
- данные могут быть любыми. Главное, чтобы по ним можно было идентифицировать пользователя.
- передаются практически в открытом виде.

### Сигнатура
Цель токена - подтвердить, что данные пэйлоэда не были изменены. Вот для этих целей и выступает сигнатура. И чтобы её сгенерировать нужен приватный ключ. Ну или некая секретная фраза, которая находится только на сервере. Только с помощью этого ключа мы можем создать сигнатуру и проверить, что она была создана именно с помощью его.
- Берем заголовок, например и кодируем его в base64. Тоже самое проделываем с данными, после этого склеиваем их. Далее эти данные шифруем с помощью нашего алгоритма HMAC-SHA256 и ключа.
- Для проверка токена необходимо проделать ту же операцию. Берем склейку заголовок + данные, кодируем с помощью алгоритма HMAC-SHA256 и нашего приватного ключа. А далее берем сигнатуру с токена и сверяем с результатом кодирования. Если результаты совпадают - значит данные подтверждены.

### Refresh token
Основной токен, про который шла речь выше, обычно имеет короткий срок жизни - 15-30 минут. Больше давать не стоит.Как только время выйдет, пользователю снова придется проходить авторизацию. Так вот чтобы этого избежать, существует Refresh токен. С помощью него можно продлить Access токен.
Когда время жизни access token подходит к концу (приложение может само проверять время жизни, или дождаться пока во время очередного использования сервер ответит «ой, всё»), приложение использует refresh token, чтобы обновить оба токена и продолжить использовать новый access token.