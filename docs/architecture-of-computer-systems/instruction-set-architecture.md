# Instruction Set Architecture

**Архитектура фон Неймана** — теоретическая модель, описывающая, как работает большинство современных компьютеров.

В основе архитектуры лежат 3 фундаментальных принципа:
1. Принцип хранимой программы — И инструкции (команды для процессора), и данные, которые эти инструкции обрабатывают, хранятся в одной и той же общей памяти.
2. Последовательное выполнение инструкций — Процессор считывает и выполняет инструкции одну за другой, в той последовательности, в которой они расположены в памяти. Специальный счётчик команд указывает на адрес следующей инструкции.
3. Двоичное кодирование — Вся информация, будь то инструкции или данные, представляется в виде двоичного кода.
   "Бутылочное горлышко" фон Неймана — Поскольку и данные, и инструкции передаются по одной и той же шине между процессором и памятью, пропускная способность этой шины становится ограничивающим фактором.

---

## ISA (Instruction Set Architecture) — Архитектура набора команд.
- Спецификация, которая определяет, как работает процессор на самом низком уровне. От выбора ISA зависят производительность, энергоэффективность, типы программного.
- Набор правил и команд, определяющих, какие операции может выполнять процессор и как программное обеспечение может с ним взаимодействовать.
  Можно представить ISA как пульт управления для процессора. Компиляторы, которые переводят языки высокого уровня (Python или C++), в машинный код) используют этот "пульт" для отдачи команд процессору. ISA является ключевым связующим звеном между аппаратным обеспечением (железом) и программным обеспечением (софтом).

### Что определяет ISA
- Набор инструкций: Полный перечень всех базовых команд, которые может выполнить процессор.
- Типы данных: Какие форматы данных процессор может обрабатывать напрямую.
- Регистры: Небольшие, очень быстрые ячейки памяти внутри самого процессора, которые используются для временного хранения данных и инструкций. ISA определяет количество, назначение и размер этих регистров.
  Большее количество регистров позволяет хранить больше часто используемых значений, уменьшая обращения к памяти, но увеличивает размер, время доступа и энергопотребление файла регистров.
- Режимы адресации: Способы, которыми процессор может получать доступ к данным в основной памяти (ОЗУ).
  Например: Регистровый, непосредственный, базовый (base + displacement), регистровый косвенный, память косвенная (memory indirect).
- Модель памяти: Как организована память и как процессор взаимодействует с ней.

### Типы ISA
1. CISC (Complex Instruction Set Computer)
   - Идея: Иметь большой и сложный набор команд. Одна команда может выполнять сразу несколько низкоуровневых действий.
   - Цель: Упростить написание программ, уменьшить объем кода.
   - Примеры: x86 и x86-64.
2. RISC (Reduced Instruction Set Computer)
   - Идея: Использовать упрощенный, минимальный набор команд. Каждая команда выполняет только одно простое действие.
   - Цель: Сделать команды простыми и быстрыми для исполнения, что позволяет повысить тактовую частоту процессора и упростить его внутреннее устройство.
   - Примеры: ARM, MIPS, RISC-V и PowerPC.

### Инструкции ISA
- Opcode: Что делать (тип операции).
- Операнды: Над чем выполнять операцию (значения).
- Bit steering: использование одного или нескольких битов в кодировке  инструкции, чтобы указать процессору, как следует интерпретировать/ выполнять остальную часть инструкции.
- Неиспользуемые биты.

_Минимальная единица процессорной адресации к памяти - байт._

### Стили Обработки Инструкций
0-адресные машины — Операнды неявно берутся из стека (например, ADD просто складывает два верхних элемента стека)
- Простая реализация, эффективное использование регистров.
- Меньше гибкости, сложнее в сложных вычислениях.
  1-адресные машины — Один операнд неявно находится в аккумуляторе.
  2-адресные машины — Один источник, одно назначение, результат идет в назначение (например, ADD DEST, SRC где DEST = DEST + SRC).
  3-адресные машины — Два источника, одно назначение (например, ADD DEST, SRC1, SRC2 где DEST = SRC1 + SRC2). MIPS является 3-адресной машиной.