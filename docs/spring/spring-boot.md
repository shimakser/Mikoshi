# Spring Boot

Это модуль Spring для упаковки приложения на базе Spring с разумными настройками по умолчанию.
- Дескриптор развертывания не требуется.
- Позволяет избежать шаблонизированного кода и объединяет зависимости в единое целое.
- Сокращает время разработки и повышает производительность.

---

## Процесс работы
- Аннотация @SpringBootApplication включает сканирование компонентов и авто-конфигурацию через аннотацию @EnableAutoConfiguration
- @EnableAutoConfiguration импортирует класс EnableAutoConfigurationImportSelector
- EnableAutoConfigurationImportSelector загружает список конфигураций из файла META-INF/spring.factories
- Каждая конфигурация пытается сконфигурить различные аспекты приложения (web, JPA, AMQP etc), регистрируя нужные бины и используя различные условия (наличие / отсутствие бина, настройки, класса и т.п.)
- Созданный в итоге AnnotationConfigEmbeddedWebApplicationContext ищет в том же DI контейнере фабрику для запуска embedded servlet container
- Servlet container запускается, приложение готово к работе!

## Автоконфигурация
- Включается аннотацией @EnableAutoConfiguration
- Работает в последнюю очередь, после регистрации пользовательских бинов
- Принимает решения о конфигурации на основании доступных в classpath классов, свойств в application.properties и т.п.
- Можно включать и выключать разные аспекты автоконфигурации, и применять ее частично (например, только MySQL + JPA, но не веб)
- Всегда отдает приоритет пользовательским бинам. Если ваш код уже зарегистрировал бин DataSource — автоконфигурация не будет его перекрывать.

## Как происходит автоконфигурация
1. Отмечаем main класс аннотацией @SpringBootApplication (аннотация инкапсулирует в себе:@SpringBootConfiguration, @ComponentScan, @EnableAutoConfiguration). Наличие @SpringBootApplication включает сканирование компонентов, автоконфигурацию и показывает разным компонентам Spring, что это Spring Boot приложение.
2. @EnableAutoConfiguration импортирует класс EnableAutoConfigurationImportSelector. Этот класс не объявляет бины сам, а использует так называемые фабрики.
3. Класс EnableAutoConfigurationImportSelector смотрит в файл META-INF/spring.factories и загружает оттуда список значений, которые являются именами классов (авто)конфигураций, которые Spring Boot импортирует. Т.е. аннотация @EnableAutoConfiguration просто импортирует ВСЕ (более 150) перечисленные в spring.factories конфигурации, чтобы предоставить нужные бины в контекст приложения.
4. Каждая из этих конфигураций пытается сконфигурировать различные аспекты приложения(web, JPA, AMQP и т.д.), регистрируя нужные бины.
5. Созданный в итоге AnnotationConfigEmbeddedWebApplicationContext ищет в том же DI контейнере фабрику для запуска embedded servlet container.
6. Servlet container запускается, приложение готово к работе!