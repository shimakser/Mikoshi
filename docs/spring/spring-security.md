# Spring Security

Spring Security — это список фильтров в виде класса FilterChainProxy, интегрированного в контейнер сервлетов, и в котором есть поле List. Каждый фильтр реализует какой-то механизм безопасности. Важна последовательность фильтров в цепочке.

Когда мы добавляем аннотацию @EnableWebSecurity добавляется DelegatingFilterProxy, его задача заключается в том, чтобы вызвать цепочку фильтров (FilterChainProxy) из Spring Security.
В Java-based конфигурации цепочка фильтров создается неявно. Если необходимо настроить свою цепочку фильтров — нужно создать класс конфигурации имплементирующий интерфейс WebSecurityConfigurerAdapter и переопределить метод:
void configure(HttpSecurity http);

---

## Основные классы и интерфейсы
- **SecurityContext** — интерфейс, отражающий контекст безопасности для текущего потока. Является контейнером для объекта типа Authentication. По умолчанию на каждый поток создается один SecurityContext, которые хранятся в SecurityContextHolder.
- **Authentication** — объект, отражающий информацию о текущем пользователе и его привилегиях. Вся работа Spring Security будет заключаться в том, что различные фильтры и обработчики будут брать и класть объект Authentication для каждого посетителя.
- **Credentials** — любой Object; то, что подтверждает учетную запись пользователя, как правило пароль (отпечатки пальцев, пин - всё это Credentials, а владелец отпечатков и пина - Principal).
- **GrantedAuthority** — полномочия, предоставленные пользователю, например, роли или уровни доступа.
- **UserDetails** — интерфейс, представляющий учетную запись пользователя. Как правило модель нашего пользователя должна имплементировать его. Она просто хранит пользовательскую информацию в виде логина, пароля и флагов isAccountNonExpired, isAccountNonLocked, isCredentialsNonExpired, isEnabled, а также коллекции прав (ролей)пользователя. Данная информация позже инкапсулируется в объекты Authentication.
- **UserDetailsService** — интерфейс объекта, реализующего загрузку пользовательских данных из хранилища.
- **AuthenticationManager** — основной стратегический интерфейс для аутентификации. Имеет только один метод authenticate(), который срабатывает, когда пользователь пытается аутентифицироваться в системе. Может сделать одну из 3 вещей в своем методе authenticate():
  - вернуть Authentication (с authenticated=true), если предполагается, что вход осуществляет корректный пользователь.
  - бросить AuthenticationException, если предполагается, что вход осуществляет некорректный пользователь.
  - вернуть null, если принять решение не представляется возможным.