# LRU cache

**Least Recently Used** — это алгоритм кэширования, который удаляет самый давно неиспользуемый элемент, когда кэш заполняется.

То есть, когда кэш достигает лимита, выбрасывается тот элемент, к которому обращались раньше всех.

---

## Зачем нужен LRU Cache

Кэш используют, чтобы ускорить доступ к часто используемым данным.

_Например:_
- Результаты SQL-запросов, чтобы не ходить в базу каждый раз.
- Изображения или ресурсы в веб-сервисе.
- Часто вызываемые вычисления в CPU-интенсивных задачах.

LRU позволяет кэшу самостоятельно очищаться от устаревших данных, не разрастаясь бесконечно.

---

## Как он работает

LRU кэш должен обеспечивать два свойства:
- O(1) доступ к элементам по ключу (как HashMap);
- O(1) обновление порядка использования (чтобы знать, кто “самый старый”).

Поэтому классическая реализация — это комбинация:
- HashMap<K, Node> — быстрый поиск по ключу;
- двусвязный список (Doubly Linked List) — для отслеживания порядка использования.

---

## Алгоритм работы

1. Когда элемент читается или добавляется — он становится "самым новым".
2. Если в кэше есть место — просто добавляем.
3. Если места нет — удаляем "самого старого" (из головы списка).
4. Любой get() или put() обновляет порядок использования.

---

## Реализация на Java (классическая)

- true в конструкторе LinkedHashMap включает порядок по последнему доступу;
- removeEldestEntry — автоматически удаляет старейший элемент при переполнении.


    public class LRUCache<K, V> extends LinkedHashMap<K, V> {
        private final int capacity;
    
        public LRUCache(int capacity) {
            super(capacity, 0.75f, true); // accessOrder = true
            this.capacity = capacity;
        }
    
        @Override
        protected boolean removeEldestEntry(Map.Entry<K, V> eldest) {
            return size() > capacity;
        }
    }

---

## Альтернативные стратегии

| Алгоритм                        | Описание                                                |
| :------------------------------ | :------------------------------------------------------ |
| **LRU (Least Recently Used)**   | Удаляется давно неиспользуемый элемент                  |
| **LFU (Least Frequently Used)** | Удаляется элемент, используемый реже всего              |
| **FIFO (First In First Out)**   | Удаляется первый добавленный элемент                    |
| **MRU (Most Recently Used)**    | Удаляется последний использованный (редко используется) |
