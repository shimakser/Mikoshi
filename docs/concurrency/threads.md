# Threads

**Приоритет потока** — это число от 1 до 10, в  зависимости от которого, планировщик потоков выбирает какой поток  запускать. Однако полагаться на приоритеты для предсказуемого выполнения многопоточной  программы нельзя!

---

### Способы создания потока
1. ClassName extends Thread#Override_run().
   Запустить: new ClassName#start().
2. ClassName impliments Runnable#Override_run().
   Запустить: new Thread(new ClassName()).start().
3. Через ExecutorService, используя utility-класс Executors.

### Демоны
Это потоки, которое работают в фоновом  режиме и не гарантируют что они завершатся. Тоеть если все потоки завершились, то поток демон просто
обрывается вместе с закрытием приложения.

### Зелёные потоки
Потоки эмулируемые виртуальной машиной или средой исполнения. Создание зелёного потока не подразумевает под собой создание реального потока ОС.
JVM берёт на себя заботу о переключении между разными green threads, а сама машина работает как один поток ОС. Потоки ОС относительно дороги в большинстве POSIX-систем. Переключение между native threads гораздо медленнее, чем между green threads. Это всё означает, что в некоторых ситуациях green threads гораздо выгоднее, чем native threads.

---

### Thread жизненный цикл
New  —  поток находится в состоянии New, когда создается экземпляр объекта класса Thread, но метод start не вызывается.
Runnable  —  когда для объекта Thread был вызван метод start. В этом состоянии поток либо ожидает, что планировщик заберет его для выполнения, либо уже запущен. Назовем состояние, когда поток уже выбран для выполнения, “работающим” (running).
Non-Runnable(Blocked , Timed-Waiting)  —  когда поток жив, то есть объект класса Thread существует, но не может быть выбран планировщиком для выполнения. Он временно неактивен.
Terminated  —  когда поток завершает выполнение своего метода run, он переходит в состояние terminated (завершен). На этом этапе задача потока завершается.

---

### Runnable и Callable
- Интерфейс Runnable появиля в Java 1.0, а интерфейс Callable был введен в Java 5.0 в составе библиотеки java.util.concurrent.
- Классы, реализующие  интерфейс Runnable должны реализовывать метод run(). Классы, реализующие интерфейс Callable должны реализовывать метод call().
- Метод Runnable.run() не возвращает никакого значения, его тип void, а метод Callable.call() может возвращать значение типа T.
- Метод run() не может бросить проверяемое исключение, метод call() может.

Несмотря на то, что start() вызывает метод run() внутри себя, это не то же самое, что просто вызов run(). Если run() вызывается как обычный метод, то он вызывается в том же потоке и никакой новый поток не запускается, как это происходит, в случае, когда вы вызываете метод start().

---

### ThreadLocal переменные
Специальный вид переменных, отличаются от обычных тем, что у каждого потока свой собственный, индивидуально инициализируемый экземпляр переменной, доступ к которой он получает через методы get() или set(). Предоставляет абстракцию над локальными переменными по отношению к потоку.