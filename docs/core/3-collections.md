# Collections

## Интерфейс Collection расширяют

1. List:
   1.1 ArrayList — инкапсулирует в себе обычный массив, длина которого автоматически увеличивается при добавлении новых
   элементов. Элементы пронумерованы, начиная с нуля, к ним можно обратиться по индексу.
   [Источники](https://habr.com/ru/articles/128269/).
   1.2 LinkedList — состоит из узлов, каждый из которых содержит как собственно данные, так и две ссылки на следующий и
   предыдущий узел.
   [Источники](https://habr.com/ru/articles/127864/).
   1.3 Vector — реализация динамического массива, методы которой синхронизированы.
   1.4 Stack — реализация стека LIFO (last-in-first-out).
2. Set — неупорядоченная коллекция, не содержащую повторяющихся элементов:
   2.1 HashSet — использует HashMap для хранения данных. В качестве ключа используется добавляемый элемент, в качестве
   значения - заглушка Object. Порядок элементов не гарантируется.
   2.2 LinkedHashSet — гарантирует, что порядок коллекции будет идентичен порядку добавления элементов.
   2.3 TreeSet — предоставляет возможность управлять порядком элементов в коллекции при помощи объекта Comparator, либо
   сохраняет элементы с использованием «natural ordering».
3. Queue FIFO (first-in-first-out) очередь:
   3.1 PriorityQueue — предоставляет возможность управлять порядком элементов в коллекции при помощи объекта Comparator,
   либо сохраняет элементы с использованием «natural ordering».
   3.2 ArrayDeque — реализация интерфейса Deque, который расширяет интерфейс Queue методами, позволяющими реализовать
   конструкцию вида LIFO (last-in-first-out).

---

## Интерфейс Map реализован классами

1. Hashtable — хэш-таблица, методы синхронизированы. Не позволяет использовать null в качестве значения или ключа, не
   является упорядоченной.
2. HashMap — позволяет использовать null в качестве значения или ключа и не является упорядоченной.
   [Источники](https://habr.com/ru/articles/421179/).
3. LinkedHashMap — упорядоченная реализация хэш-таблицы.
   [Источники](https://habr.com/ru/articles/129037/).
4. TreeMap — основано на красно-чёрных деревьях. Является упорядоченной и предоставляет возможность управлять порядком
   элементов в коллекции при помощи объекта Comparator, либо сохраняет элементы с использованием «natural ordering».
5. WeakHashMap — реализация хэш-таблицы, которая организована с использованием weak references для ключей (сборщик
   мусора автоматически удалит элемент из коллекции при следующей сборке мусора, если на ключ этого элемента нет жёстких
   ссылок).

---

## Fail-fast vs Fail-safe
1. Fail-fast
- Бросают ConcurrentModificationException, если коллекция модифицируется во время итерации.
- Примеры: ArrayList, HashMap, HashSet (обычные).
- Работают через modCount, проверяя при каждом вызове next().
2. Fail-safe:
- Не бросают исключения, потому что используют копию коллекции.
- Поддерживают многопоточность.
- Примеры: CopyOnWriteArrayList, ConcurrentHashMap
- Минусы: могут работать медленнее и потреблять больше памяти.