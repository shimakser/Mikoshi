# RESTful, gRPC

## RESTful

1. Клиент-серверная архитектура
   - Разделение клиента (UI) и сервера (бизнес-логика, данные).
   - Упрощает масштабирование и повторное использование.
2. Отсутствие состояния (Statelessness)
   - Сервер не хранит состояние клиента между запросами.
   - Каждый HTTP-запрос содержит всю необходимую информацию (например, Authorization header).
   - Это облегчает масштабирование и упрощает отказоустойчивость.
3. Кешируемость
   - Ответы сервера могут быть отмечены как кешируемые.
   - Кеш может находиться на клиенте, прокси или CDN.
4. Единообразие интерфейса (Uniform Interface). Сердце REST. Это означает следующее:
   - Уникальные идентификаторы ресурсов (например: /users/42).
   - Манипуляция ресурсами через представление (обычно JSON).
   - Стандартизированные HTTP методы (см. ниже).
   - Self-descriptive messages – заголовки, URI и тело должны нести. всю информацию.
5. Слоистая система (Layered System)
   - Архитектура может включать прокси, балансировщики, шины, но клиент этого не знает.
6. Code-on-demand (опционально)
   - Сервер может передавать исполняемый код (например, JavaScript) клиенту. Почти не используется в API.

### Также
7. Пагинация, фильтрация, сортировка
   - _Пагинация:_
     - Offset-based: /users?offset=20&limit=10.
     - Cursor-based (лучше для больших данных): /users?after=xyz123.
   - _Фильтрация:_ /users?country=BY&status=active.
   - _Сортировка:_ /users?sort=createdAt_desc.
8. Версионирование API
   - URI-версионирование: /v1/users
   - Через заголовок: Accept: application/vnd.company.v1+json
   - Параметры: ?version=1 (редко)
9. Ресурсы и URI-дизайн
   - Используй существительные во множественном числе: /users, /orders/42
   - Не включай глаголы: /createUser
   - Подресурсы: /users/42/orders/5
   - Фильтрация и параметры:
     - /users?age=30&country=BY
     - /orders?limit=10&sort=createdAt_desc
   - HATEOAS (optional in practice): Ответ содержит ссылки на действия (links: self, next, delete)

---

## gRPC

Свременный высокопроизводительный фреймворк удалённого вызова процедур (Remote Procedure Call), разработанный Google.
Онованный на HTTP/2, использующий Protocol Buffers (protobuf) в качестве механизма сериализации данных и позволяющий эффективно вызывать методы удалённо, как будто это локальные функции.

1. Ключевые принципы
   - Protocol Buffers (protobuf) — Компактный, быстрый формат сериализации. Используется вместо JSON/XML.
   - IDL (Interface Definition Language) — gRPC использует .proto файлы для определения сервисов и сообщений.
   - HTTP/2 Transport — Позволяет использовать мультиплексирование, сжатие заголовков, server push и bidirectional streaming.
   - Поддерживает множество языков (Java, Go, Python, C#, etc.)
   - Автоматически генерирует клиент и серверный код по .proto.
   - Поддержка 4 видов RPC: Unary, Server Streaming, Client Streaming, Bidirectional Streaming.

2. Виды вызовов в gRPC
   - Unary RPC — Обычный вызов: клиент отправляет одно сообщение и получает одно в ответ.
   - Server Streaming — Клиент отправляет один запрос, сервер возвращает поток ответов.
   - Client Streaming — Клиент отправляет поток запросов, сервер возвращает один ответ.
   - Bidirectional Streaming — Клиент и сервер обмениваются потоками сообщений одновременно.

3. Архитектурные преимущества
   - Малый overhead благодаря бинарной сериализации.
   - Высокая производительность (особенно при больших объемах сообщений).
   - Кросс-языковость: микросервисы, написанные на разных языках, могут легко взаимодействовать.
   - Streaming позволяет реализовать real-time коммуникацию.
   - Хорошо масштабируется для микросервисной архитектуры.
   - Поддержка interceptors, middleware, timeouts, retries, load balancing, deadlines.

4. Безопасность и надёжность
   - TLS/SSL поддерживается "из коробки".
   - Поддержка метаданных — можно передавать токены, user-agent, trace-ids и др.
   - Deadlines & timeouts — встроенная поддержка.
   - Retry policies, health checks, load balancing — доступны в gRPC eco-system.
   - Circuit Breakers и Rate Limiting добавляются через service mesh или прокси.